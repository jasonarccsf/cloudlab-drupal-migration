---
# See: https://github.com/geerlingguy/drupal-vm/blob/master/docs/deployment/multisite.md
# See: https://github.com/geerlingguy/ansible-role-drupal/blob/master/molecule/default/test-vars.yml

#
# PHP 8.0
#
php_version: "8.0"
php_enable_webserver: false
php_enable_php_fpm: true
php_fpm_listen: "127.0.0.1:9000"

#
# Drupal 7
#

drupal_core_path: "/var/www/my-drupal-site"
drupal_domain: "local.my-drupal-site.com"

drupal_build_makefile: false
drupal_build_composer: false
drupal_build_composer_project: false
drupal_install_site: true

apache_mods_enabled:
  - expires
  - ssl
  - rewrite
  - proxy
  - proxy_fcgi

# apache_remove_default_vhost: true

apache_vhosts:
  # Drupal VM's default domain, evaluating to whatever `vagrant_hostname` is set to (drupalvm.test by default).
  - servername: "drupal-7-sfdpa.site"
    serveralias: "www.{{ drupal_domain }}"
    documentroot: "{{ drupal_core_path }}"
    extra_parameters: |
      <FilesMatch \.php$>
        SetHandler "proxy:fcgi://{{ php_fpm_listen }}"
      </FilesMatch>

  # - servername: "local.second-drupal-site.com"
  #   documentroot: "{{ drupal_core_path }}"
  #   extra_parameters: "{{ apache_vhost_php_fpm_parameters }}"

  # - servername: "local.third-drupal-site.com"
  #   documentroot: "{{ drupal_core_path }}"
  #   extra_parameters: "{{ apache_vhost_php_fpm_parameters }}"

mysql_python_package_debian: python3-mysqldb

mysql_databases:
  - name: drupal
    encoding: utf8
    collation: utf8_general_ci

  # - name: drupal_two
  #   encoding: utf8
  #   collation: utf8_general_ci

mysql_users:
  - name: drupal
    host: "%"
    password: drupal
    priv: "drupal.*:ALL"

  # - name: drupal-two
  #   host: "%"
  #   password: drupal-two
  #   priv: "drupal_two.*:ALL"
